<!-- Modal for signUp -->
<div
  class="modal fade"
  id="SignUpModal"
  tabindex="-1"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-body p-4">
        <!-- Header -->
        <div class="row align-items-center mb-4">
          <div class="col">
            <h2 class="signUp-title mb-0 text-center fs-3">
              Sign Up For
              <span class="signUp-changer">{{ SignToggler }}</span>
            </h2>
          </div>
          <div class="col-auto">
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
        </div>

        <!-- Reactive Form -->
        <form #signUpForm="ngForm" (ngSubmit)="onSignUp()" class="fade-in">
          <div class="row g-4">
            <!-- Left Column: Basic Information -->
            <div class="col-12 col-lg-6">
              <div class="form-section h-100">
                <h4 class="section-title">Basic Information</h4>
                <div class="row g-3">
                  <!-- First Name -->
                  <div class="col-12 col-sm-6">
                    <label for="firstName" class="form-label">First Name</label>
                    <input
                      type="text"
                      class="form-control"
                      id="firstName"
                      name="firstName"
                      [(ngModel)]="signUpData.firstName"
                      placeholder="Your First Name"
                      required
                    />
                  </div>
                  <!-- Last Name -->
                  <div class="col-12 col-sm-6">
                    <label for="lastName" class="form-label">Last Name</label>
                    <input
                      type="text"
                      class="form-control"
                      id="lastName"
                      name="lastName"
                      [(ngModel)]="signUpData.lastName"
                      placeholder="Your Last Name"
                      required
                    />
                  </div>
                  <!-- Gender -->
                  <div class="col-12 col-sm-6">
                    <label for="gender" class="form-label">Gender</label>
                    <select
                      class="form-select"
                      id="gender"
                      name="gender"
                      [(ngModel)]="signUpData.gender"
                      required
                    >
                      <option value="" disabled selected>Select Gender</option>
                      <option value="Male">Male</option>
                      <option value="Female">Female</option>
                    </select>
                  </div>
                  <!-- Date of Birth -->
                  <div class="col-12 col-sm-6">
                    <label for="dateOfBirth" class="form-label"
                      >Date of Birth</label
                    >
                    <input
                      type="date"
                      class="form-control"
                      id="dateOfBirth1"
                      name="dateOfBirth"
                      [(ngModel)]="signUpData.dateOfBirth"
                      required
                    />
                  </div>
                  <!-- Email -->
                  <div class="col-12 col-sm-6">
                    <label for="email" class="form-label">Email Address</label>
                    <input
                      type="email"
                      class="form-control"
                      id="email"
                      name="email"
                      [(ngModel)]="signUpData.email"
                      placeholder="Enter your email"
                      required
                    />
                  </div>
                  <!-- Phone -->
                  <div class="col-12 col-sm-6">
                    <label for="phone" class="form-label">Phone Number</label>
                    <input
                      type="tel"
                      class="form-control"
                      id="phone"
                      name="phone"
                      [(ngModel)]="signUpData.phone"
                      pattern="[0-9]*"
                      maxlength="11"
                      minlength="10"
                      placeholder="Enter your phone number"
                      required
                    />
                  </div>
                  <!-- Password -->
                  <div class="col-12 col-sm-6 HiderMain">
                    <label for="password" class="form-label">Password</label>
                    <input
                      type="password"
                       [type]="hider ? 'password' : 'text'"
                      class="form-control"
                      id="password"
                      name="password"
                      [(ngModel)]="signUpData.password"
                      placeholder="Enter your password"
                      minlength="8"
                      required
                    />
                     <i
                  class="bi"
                  [className]="hider ? 'bi-eye-slash show' : 'bi-eye show'"
                  (click)="hide()"
                ></i>
                  </div>
                  <!-- Confirm Password -->
                  <div class="col-12 col-sm-6 HiderConfrim">
                    <label for="confirmPassword" class="form-label"
                      >Confirm Password</label
                    >
                    <input
                     [type]="hider ? 'password' : 'text'"
                      class="form-control"
                      id="confirmPassword"
                      name="confirmPassword"
                      [(ngModel)]="signUpData.confirmPassword"
                      placeholder="Confirm your password"
                      minlength="8"
                      required
                    />
                    <i
                  class="bi"
                  [className]="hider ? 'bi-eye-slash show' : 'bi-eye show'"
                  (click)="hide()"
                ></i>
                  </div>

                  <!-- Address -->
                  <div class="col-12 col-sm-6">
                    <label for="address" class="form-label">Address</label>
                    <input
                      type="text"
                      class="form-control"
                      id="address"
                      name="address"
                      [(ngModel)]="signUpData.address"
                      placeholder="Enter your address"
                      required
                    />
                  </div>
                </div>
              </div>
            </div>

            <!-- Right Column: Role Specific Information -->
            <div class="col-12 col-lg-6">
              <!-- Doctor Fields -->
              <div *ngIf="isDoctor" class="form-section h-100 fade-in">
                <h4 class="section-title">Doctor Information</h4>
                <div class="row g-3">
                  <!-- Biography -->
                  <div class="col-12">
                    <label for="biography" class="form-label">Biography</label>
                    <textarea
                      class="form-control"
                      id="biography"
                      name="biography"
                      [(ngModel)]="signUpData.biography"
                      rows="3"
                      placeholder="Enter your biography"
                      required
                    ></textarea>
                  </div>
                  <!-- Qualifications -->
                  <div class="col-12">
                    <label for="qualifications" class="form-label"
                      >Qualifications</label
                    >
                    <textarea
                      class="form-control"
                      id="qualifications"
                      name="qualifications"
                      [(ngModel)]="signUpData.qualifications"
                      rows="3"
                      placeholder="Enter your qualifications"
                      required
                    ></textarea>
                  </div>
                  <!-- CV Upload -->
                  <div class="col-12">
                    <label for="cv" class="form-label">CV Upload</label>
                    <input
                      type="file"
                      class="form-control"
                      id="cv"
                      name="cv"
                      (change)="onFileSelected($event)"
                      accept=".jpeg,.jpg,.png"
                      required
                    />
                  </div>
                  <!-- Appointment Fees -->
                  <div class="col-12 col-sm-6">
                    <label for="onlineFee" class="form-label">Online Fee</label>
                    <input
                      type="number"
                      class="form-control"
                      id="onlineFee"
                      name="onlineAppointmentFee"
                      [(ngModel)]="signUpData.onlineAppointmentFee"
                      placeholder="Online fee"
                      min="0"
                      step="0.01"
                      onkeypress="return event.charCode >= 48 && event.charCode <= 57 || event.charCode === 46"
                      (input)="validatePositiveNumber($event)"
                      required
                    />
                  </div>
                  <div class="col-12 col-sm-6">
                    <label for="inPersonFee" class="form-label"
                      >In-Person Fee</label
                    >
                    <input
                      type="number"
                      class="form-control"
                      id="inPersonFee"
                      name="inPersonAppointmentFee"
                      [(ngModel)]="signUpData.inPersonAppointmentFee"
                      placeholder="In-person fee"
                      min="0"
                      step="0.01"
                      onkeypress="return event.charCode >= 48 && event.charCode <= 57 || event.charCode === 46"
                      (input)="validatePositiveNumber($event)"
                      required
                    />
                  </div>
                  <!-- Availabilities -->
                  <div class="col-12">
                    <label class="form-label">Availabilities</label>
                    <div
                      *ngFor="
                        let availability of signUpData.availabilities;
                        let i = index
                      "
                      class="row g-2 mb-2"
                    >
                      <div class="col">
                        <select
                          class="form-control"
                          [(ngModel)]="signUpData.availabilities[i].day"
                          name="availabilityDay{{ i }}"
                          required
                        >
                          <option value="" disabled selected>Select Day</option>
                          <option *ngFor="let day of ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday']" [value]="day"> {{ day }}</option>
                        </select>
                      </div>
                      <div class="col">
                        <input
                          type="time"
                          class="form-control"
                          placeholder="Start Time"
                          [(ngModel)]="signUpData.availabilities[i].startTime"
                          name="availabilityStartTime{{ i }}"
                          required
                        />
                      </div>
                      <div class="col">
                        <input
                          type="time"
                          class="form-control"
                          placeholder="End Time"
                          [(ngModel)]="signUpData.availabilities[i].endTime"
                          name="availabilityEndTime{{ i }}"
                          required
                        />
                      </div>
                      <div class="col-auto">
                        <button
                          type="button"
                          class="btn btn-danger btn-sm"
                          (click)="removeAvailability(i)"
                        >
                          Remove
                        </button>
                      </div>
                    </div>
                    <button
                      type="button"
                      class="btn btn-primary btn-sm"
                      (click)="addAvailability()"
                    >
                      Add Availability
                    </button>
                  </div>
                  <!-- Specialities -->
                  <div class="col-12">
                    <label for="specialities" class="form-label"
                      >Specialities</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="specialities"
                      name="specialities"
                      [(ngModel)]="specialitiesInput"
                      placeholder="Enter specialities separated by commas"
                      required
                    />
                  </div>
                  <!-- Educations -->
                  <div class="col-12">
                    <label class="form-label">Educations</label>
                    <div
                      *ngFor="
                        let education of signUpData.educations;
                        let i = index
                      "
                      class="row g-2 mb-2"
                    >
                      <div class="col-3">
                        <input
                          type="text"
                          class="form-control"
                          placeholder="Degree"
                          [(ngModel)]="signUpData.educations[i].degree"
                          name="educationDegree{{ i }}"
                          required
                        />
                      </div>
                      <div class="col-3">
                        <input
                          type="text"
                          class="form-control"
                          placeholder="Institution"
                          [(ngModel)]="signUpData.educations[i].institution"
                          name="educationInstitution{{ i }}"
                          required
                        />
                      </div>
                      <div class="col-2">
                        <input
                          type="date"
                          class="form-control"
                          placeholder="Start Date"
                          [(ngModel)]="signUpData.educations[i].startDate"
                          name="educationStartDate{{ i }}"
                          required
                        />
                      </div>
                      <div class="col-2">
                        <input
                          type="date"
                          class="form-control"
                          placeholder="End Date"
                          [(ngModel)]="signUpData.educations[i].endDate"
                          name="educationEndDate{{ i }}"
                          required
                        />
                      </div>
                      <div class="col-auto">
                        <button
                          type="button"
                          class="btn btn-danger btn-sm"
                          (click)="signUpData.educations.splice(i, 1)"
                        >
                          Remove
                        </button>
                      </div>
                    </div>
                    <button
                      type="button"
                      class="btn btn-primary btn-sm"
                      (click)="addEducation()"
                    >
                      Add Education
                    </button>
                  </div>

                  <!-- Experiences -->
                  <div class="col-12">
                    <label class="form-label">Experiences</label>
                    <div
                      *ngFor="let exp of signUpData.experiences; let i = index"
                      class="row g-2 mb-2"
                    >
                      <div class="col">
                        <input
                          type="text"
                          class="form-control"
                          placeholder="Institution"
                          [(ngModel)]="signUpData.experiences[i].institution"
                          name="expInstitution{{ i }}"
                          required
                        />
                      </div>
                      <div class="col">
                        <input
                          type="date"
                          class="form-control"
                          placeholder="Start Date"
                          [(ngModel)]="signUpData.experiences[i].startDate"
                          name="expStartDate{{ i }}"
                          required
                        />
                      </div>
                      <div class="col">
                        <input
                          type="date"
                          class="form-control"
                          placeholder="End Date"
                          [(ngModel)]="signUpData.experiences[i].endDate"
                          name="expEndDate{{ i }}"
                          required
                        />
                      </div>
                      <div class="col-10">
                         <textarea class="form-control"
                          placeholder="Description"
                          [(ngModel)]="signUpData.experiences[i].description"
                          name="expDescription{{ i }}"
                          rows="2"
                          required>
                         </textarea>
                      </div>
                      <div class="col-auto">
                        <button
                          type="button"
                          class="btn btn-danger btn-sm"
                          (click)="signUpData.experiences.splice(i, 1)"
                        >
                          Remove
                        </button>
                      </div>
                    </div>
                    <button
                      type="button"
                      class="btn btn-primary btn-sm"
                      (click)="addExperience()"
                    >
                      Add Experience
                    </button>
                  </div>
                </div>
              </div>

              <!-- Patient Fields -->
              <div *ngIf="!isDoctor" class="form-section h-100 fade-in">
                <h4 class="section-title">Patient Information</h4>
                <div class="row g-3">
                  <!-- Medical History -->
                  <div class="col-12">
                    <label for="medicalHistory" class="form-label"
                      >Medical History</label
                    >
                    <textarea
                      class="form-control"
                      id="medicalHistory"
                      name="medicalHistory"
                      [(ngModel)]="signUpData.medicalHistory"
                      rows="4"
                      placeholder="Enter your medical history"
                      required
                    ></textarea>
                  </div>
                  <!-- Emergency Contact -->
                  <div class="col-12">
                    <label for="emergencyName" class="form-label"
                      >Emergency Contact Name</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="emergencyName"
                      name="emergencyContactName"
                      [(ngModel)]="signUpData.emergencyContactName"
                      placeholder="Emergency contact name"
                      required
                    />
                  </div>
                  <div class="col-12">
                    <label for="emergencyPhone" class="form-label"
                      >Emergency Contact Phone</label
                    >
                    <input
                      type="tel"
                      class="form-control"
                      id="emergencyPhone"
                      name="emergencyContactPhone"
                      [(ngModel)]="signUpData.emergencyContactPhone"
                      pattern="[0-9]*"
                      maxlength="11"
                      minlength="10"
                      placeholder="Emergency contact phone"
                      required
                    />
                  </div>
                </div>
              </div>
            </div>

            <!-- Terms and Submit -->
            <div class="col-12">
              <!-- <div class="form-check mb-3">
                <input
                  type="checkbox"
                  class="form-check-input"
                  id="terms"
                  name="termsAccepted"
                  [(ngModel)]="signUpData.termsAccepted"
                  required
                />
                <label class="form-check-label" for="terms">
                  I accept all
                  <span class="text-primary">terms and conditions</span>
                </label>
              </div> -->
              <div
                class="d-flex flex-column flex-md-row align-items-center justify-content-evenly gap-3 px-3 px-md-5"
              >
                <div class="text-center text-md-start">
                  <p class="mb-0">
                    Already have an account?
                    <a
                      href="#"
                      class="text-primary"
                      data-bs-toggle="modal"
                      data-bs-target="#LogInModal"
                    >
                      Login
                    </a>
                  </p>
                </div>
                <div>
                  <button
                    type="submit"
                    class="signUpBtn btn w-100"
                    [disabled]="isSubmitting"
                  >
                    {{ isSubmitting ? "Signing Up..." : "Sign Up" }}
                  </button>
                </div>
                <div class="text-center text-md-start">
                  <p class="navUser mb-0" (click)="signUpChanger(!isDoctor)">
                    Sign up For
                    <span class="signUp-changer">{{ signUpToggler }}</span>
                  </p>
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
